version: "v1.0"
name: Cross-platform pipeline
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804

blocks:
  - name: "Build for Android"
    dependencies: []
    task:
      jobs:
      - name: "Build"
        commands:
          - echo "Build completed"

  - name: "Build for iOS"
    dependencies: []
    task:
      agent:
        machine:
          type: a1-standard-4
          os_image: macos-mojave
      jobs:
      - name: "Build"
        commands:
          - echo "Build completed"

  - name: "Build for Web"
    dependencies: []
    task:
      jobs:
      - name: "Build"
        commands:
          - echo "Build completed"

  - name: "Test on Android"
    dependencies: ["Build for Android"]
    task:
      jobs:
      - name: "Tests 1/2"
        commands:
          - echo "Test completed"
      - name: "Tests 2/2"
        commands:
          - echo "Test completed"

  - name: "Test on Android"
    dependencies: ["Build for Android"]
    task:
      agent:
        machine:
          type: a1-standard-4
          os_image: macos-mojave
      jobs:
      - name: "Tests"
        commands:
          - echo "Test completed"

  - name: "Test on Web"
    dependencies: ["Build for Web"]
    task:
      jobs:
      - name: "Tests 1/3"
        commands:
          - echo "Test completed"
      - name: "Tests 2/3"
        commands:
          - echo "Test completed"
      - name: "Tests 3/3"
        commands:
          - echo "Test completed"

  - name: "Release"
    dependencies: ["Test on Android", "Test on iOS", "Test on Web"]
    task:
      jobs:
      - name: "ðŸš€ Google Play"
        commands:
          - echo "Release completed"
      - name: "ðŸš€ AppStore"
        commands:
          - echo "Release completed"
      - name: "ðŸš€ Web"
        commands:
          - echo "Rollout completed"
